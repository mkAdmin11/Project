---

- name: postgres - set up postgres server
  include_tasks: pg.yml
  when: ansible_hostname == server3.name|string

- name: postgres - create db share
  file:
    path: /db_share
    state: directory
    owner: postgres
    group: postgres
    mode: 0755
  when: ansible_hostname == server3.name|string

- name: postgres - add demo db
  include_tasks: demo.yml
  vars:
    ansible_become_user: postgres
  when: ansible_hostname == server3.name|string

- name: postgres - install pgadmin
  include_tasks: pgadmin.yml
  when: ansible_hostname == server2.name|string

- name: postgres - config apache for pgadmin
  include_tasks: apache.yml
  when: ansible_hostname == server2.name|string
