# SKILLFACTORY 21-22

## Дипломная работа профессии "Системный администратор Linux"

### Задание

- [Часть 1](#Часть-1)
- [Часть 2](#Часть-2)
- [Часть 3](#Часть-3)

---

### Часть 1

На облаке _Yandex Cloud_ создается 3 виртуальных машины на _Ubuntu Server_.  
**Сервер 1** — здесь находится _Zabbix-server_, _Grafana_, _Ansible_, _filebeat_, _OpenVPN-server_.  
**Сервер 2** — здесь надодится _nginx_, _Apache_, _PHP_, _Zabbix-agent_, _bind_, _mail_, _filebeat_.  
**Сервер 3** — _PostgreSQL_, _Zabbix-agent_, _ELK_.  

Репозиторий на _GitHub_, как результат дипломного проекта клонируется на Сервер 1 и с него прокатываются все роли, для настройки обвязки серверов.

Сервер 1 выступает в роли _OpenVPN-server_, на двух двух оставшихся серверах установлены/настроены _OpenVPN-client_ для подключения к Серверу.
Дальнейшее взаимодействие серверов и всех сервисов происходит через _VPN_ сеть.

Снаружи должны быть доступны:
- Сервисы _DNS_ и почта.
- Веб-интерфейсы _Zabbix-server_, _Kibana_, _Grafana_ и почты.
- Сайт для заказчика, о котором позже.

---

### Часть 2

Далее троводится настройка обвязки серверов, требуется привести инфраструктуру к следующему состоянию:

1.	На всех серверах должно быть локальное время.
2.	Все сервера должен мониторить _Zabbix_, используя _Linux template_.
3.	_Zabbix_ должен мониторить состояние _PostgreSQL_.
4.	_Zabbix_ должен мониторить состояние _ELK_.
5.	Зарегистрирован бесплатный домен в любой бесплатной зоне, _DNS_ запрос перенаправляется на наш _DNS_-сервер.
6.	На серверах с _nginx_ и _Apache_ настроен filebeat, он отправляет логи веб-серверов на _ELK_, в _Kibana_ отображаются эти логи.
7.	_DNS_ должен работать, все три сервера должны его использовать и все три резолвиться под своими именами.
8.	Почта должна работать. Письма получаются и принимаются.
9.	В _PostgreSQL_ загружена тестовая база (демо-база авиаперелетов).
10.	Должен быть установлен _pgAdmin_ (доступ только с _VPN_ сети).
11.	Поднят веб-сервер _nginx_ как реверс прокси для двух сайтов:
    -	Первый, сайт для сервиса заказчика: рут с любой нейтральной картинкой + форма обратной связи, которая использует наш почтовый сервер. Сайт с должен открываться только по 443 порту с _SSL_. 
    -	Второй, это веб-интерфейс наших сервисов.
12.	В _Grafana_ должен быть дашборд с _CPU_, _mem_, _disk usage_ всех хостов.

---

### Часть 3

На последнем этапе, потребутся паралельно проделать некоторые изменения, с уже готовой инфраструктурой:

1. Перенесите _Zabbix-server_ в _Docker_, то же самое сделайте с _ELK_ и _Grafana_.
2. Взять любую _CMS_ (хоть тот же _WordPress_, _joomla_), и установите её на свой сервер с nginx.
3. Теперь творческая часть, которую мы упустим. На _CMS_ требуется сделать небольшой сайт с сделать описание проделанной работы.
4. Сайт с формой обратной связи также должен работать.
5. На _PostgreSQL_ нужно будет создать копию тестовой базы с именем _dbname_fortests_ с очищенными таблицами (но сохранением структуры) _boarding_passes_, _Bookings_.
